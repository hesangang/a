import{C as e,L as l,p as a,a as t,r as d,o,c as n,f as r,t as s,J as u,M as i,w as m,h as f}from"./vendor.62413589.js";import{g as c,p as h,d as p,a as V}from"./request.61a9cc87.js";import"./index.e1526510.js";const b={watch:{filterText(e){this.$refs.tree.filter(e)}},data:()=>({filterText:"",tree:{data:[],defaultProps:{children:"children",label:"name"}},query:{method:null,name:null,page:1,pageSize:10},transferData:[],transferValue:[],model:{menuNo:null,resourceNos:[]},addVisible:!1,treeData:null,form:{id:null,parentId:null,code:null,name:null,href:null,icon:null,enable:1}}),methods:{handleNodeClick(e){""===this.query.method&&(this.query.method=null),this.model.menuNo=e.id,c("/menu/"+this.model.menuNo+"/resource",this.query).then((e=>{this.transferData=e.data,this.transferValue=[],e.data.forEach((e=>{e.selected&&this.transferValue.push(e.id)}))}))},filterNode:(e,l)=>!e||-1!==l.name.indexOf(e),treeFun(){c("/menu/tree",null).then((e=>{this.tree.data=e.data}))},append(e){this.treeData=e,this.form.parentId=e.id,this.addVisible=!0},addFun(){h("/menu",this.form).then((l=>{this.addVisible=!1,e.success(l.msg);const a={id:l.data.id,name:l.data.name,children:[]};this.treeData.children||(this.treeData.children=[]),this.treeData.children.push(a)}))},remove(a,t){l.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{const l=a.parent,d=l.data.children||l.data,o=d.findIndex((e=>e.id===t.id));d.splice(o,1),p("/menu/"+t.id,null).then((l=>{e.success(l.msg)}))})).catch((()=>{}))},saveFun(){null===this.model.menuNo&&e.warning("请选择菜单"),this.model.resourceNos=this.transferValue,V("/menu/"+this.model.menuNo+"/resource",this.model).then((l=>{e.success(l.msg)}))}},mounted(){this.treeFun()}},k=m();a("data-v-6f017ca6");const _={class:"custom-tree-container"},C={class:"block"},y={class:"custom-tree-node"},g={class:"block"},N=f("刷新"),v=f("保存"),x={class:"dialog-footer"},D=f("取 消"),U=f("确 定");t();const I=k(((e,l,a,t,m,f)=>{const c=d("el-input"),h=d("el-tree"),p=d("el-col"),V=d("el-button"),b=d("el-transfer"),I=d("el-row"),w=d("el-form-item"),F=d("el-option"),q=d("el-select"),T=d("el-form"),$=d("el-dialog");return o(),n("div",_,[r(I,{gutter:20},{default:k((()=>[r(p,{span:8},{default:k((()=>[r("div",C,[r(c,{placeholder:"输入关键字进行过滤",modelValue:m.filterText,"onUpdate:modelValue":l[1]||(l[1]=e=>m.filterText=e)},null,8,["modelValue"]),r(h,{data:m.tree.data,props:m.tree.defaultProps,"filter-node-method":f.filterNode,ref:"tree",onNodeClick:f.handleNodeClick,"node-key":"id","check-strictly":!0,"expand-on-click-node":!0},{default:k((({node:e,data:l})=>[r("span",y,[r("span",null,s(e.label),1),r("span",null,[r("a",{onClick:e=>f.append(l)}," Append ",8,["onClick"]),r("a",{onClick:a=>f.remove(e,l)}," Delete ",8,["onClick"])])])])),_:1},8,["data","props","filter-node-method","onNodeClick"])])])),_:1}),r(p,{span:16},{default:k((()=>[r("div",g,[r(b,{modelValue:m.transferValue,"onUpdate:modelValue":l[2]||(l[2]=e=>m.transferValue=e),style:{"text-align":"left",display:"inline-block"},filterable:"",props:{key:"id",label:"name"},titles:["全部","已选"],"button-texts":["左","右"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:m.transferData},{"left-footer":k((()=>[r(V,{class:"transfer-footer",size:"small"},{default:k((()=>[N])),_:1})])),"right-footer":k((()=>[r(V,{class:"transfer-footer",size:"small",onClick:f.saveFun},{default:k((()=>[v])),_:1},8,["onClick"])])),_:1},8,["modelValue","data"])])])),_:1})])),_:1}),r($,{title:"新增",modelValue:m.addVisible,"onUpdate:modelValue":l[11]||(l[11]=e=>m.addVisible=e),width:"30%"},{footer:k((()=>[r("span",x,[r(V,{onClick:l[10]||(l[10]=e=>m.addVisible=!1)},{default:k((()=>[D])),_:1}),r(V,{type:"primary",onClick:f.addFun},{default:k((()=>[U])),_:1},8,["onClick"])])])),default:k((()=>[r(T,{"label-width":"80px"},{default:k((()=>[u(r(w,{label:"ID"},{default:k((()=>[r(c,{modelValue:m.form.id,"onUpdate:modelValue":l[3]||(l[3]=e=>m.form.id=e),type:"hidden"},null,8,["modelValue"])])),_:1},512),[[i,!1]]),u(r(w,{label:"上级ID"},{default:k((()=>[r(c,{modelValue:m.form.parentId,"onUpdate:modelValue":l[4]||(l[4]=e=>m.form.parentId=e),type:"hidden"},null,8,["modelValue"])])),_:1},512),[[i,!1]]),r(w,{label:"名称"},{default:k((()=>[r(c,{modelValue:m.form.name,"onUpdate:modelValue":l[5]||(l[5]=e=>m.form.name=e)},null,8,["modelValue"])])),_:1}),r(w,{label:"菜单Code"},{default:k((()=>[r(c,{modelValue:m.form.code,"onUpdate:modelValue":l[6]||(l[6]=e=>m.form.code=e)},null,8,["modelValue"])])),_:1}),r(w,{label:"菜单Href"},{default:k((()=>[r(c,{modelValue:m.form.href,"onUpdate:modelValue":l[7]||(l[7]=e=>m.form.href=e)},null,8,["modelValue"])])),_:1}),r(w,{label:"菜单图标"},{default:k((()=>[r(c,{modelValue:m.form.icon,"onUpdate:modelValue":l[8]||(l[8]=e=>m.form.icon=e)},null,8,["modelValue"])])),_:1}),r(w,{label:"状态"},{default:k((()=>[r(q,{modelValue:m.form.enable,"onUpdate:modelValue":l[9]||(l[9]=e=>m.form.enable=e),placeholder:"状态",class:"handle-select mr10"},{default:k((()=>[r(F,{key:"0",label:"禁用",value:0}),r(F,{key:"1",label:"启用",value:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}));b.render=I,b.__scopeId="data-v-6f017ca6";export default b;
